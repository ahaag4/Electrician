<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - SHUKLA-ELECTRICALS</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Chart.js for analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    
    <style>
        :root {
            --primary: #10b981;
            --primary-dark: #059669;
            --secondary: #f59e0b;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --dark: #1f2937;
            --light: #f9fafb;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }
        
        /* Animation Classes */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Loading Spinner */
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            min-width: 300px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success { background-color: var(--primary); }
        .toast.error { background-color: var(--danger); }
        .toast.warning { background-color: var(--warning); }
        .toast.info { background-color: var(--info); }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal {
            background-color: white;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
        }
        
        /* Table Styles */
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .data-table th {
            background-color: #f9fafb;
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .data-table td {
            padding: 12px 16px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .data-table tr:hover {
            background-color: #f9fafb;
        }
        
        /* Status Badges */
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .status-active { background-color: #d1fae5; color: #065f46; }
        .status-inactive { background-color: #f3f4f6; color: #6b7280; }
        .status-pending { background-color: #fef3c7; color: #92400e; }
        .status-published { background-color: #dbeafe; color: #1e40af; }
        
        /* Card Hover Effects */
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .data-table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- Login Screen -->
    <div id="login-screen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100">
        <div class="bg-white p-8 rounded-xl shadow-2xl max-w-md w-full fade-in">
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-bolt text-white text-2xl"></i>
                </div>
                <h2 class="text-3xl font-bold text-gray-800">SHUKLA-ELECTRICALS</h2>
                <p class="text-gray-600 mt-2">Admin Panel</p>
            </div>
            
            <form id="login-form" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                    <input type="email" id="email" required 
                           class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition duration-200">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="password" required 
                           class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 transition duration-200">
                </div>
                <button type="submit" id="login-btn"
                        class="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white py-3 rounded-lg font-semibold transition duration-200 transform hover:-translate-y-0.5">
                    <span id="login-text">Sign In</span>
                    <div id="login-spinner" class="spinner mx-auto hidden" style="width: 24px; height: 24px;"></div>
                </button>
                <p class="text-sm text-gray-600 text-center">Default: admin@shuklaelectricals.com / admin123</p>
            </form>
            
            <div id="login-error" class="mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm hidden">
                Invalid email or password
            </div>
        </div>
    </div>
    
    <!-- Admin Panel -->
    <div id="admin-panel" class="hidden">
        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="md:hidden fixed top-4 left-4 z-50 p-3 bg-green-600 text-white rounded-lg shadow-lg">
            <i class="fas fa-bars text-xl"></i>
        </button>
        
        <!-- Sidebar -->
        <div class="sidebar fixed inset-y-0 left-0 z-40 w-64 bg-gradient-to-b from-gray-900 to-gray-800 text-white transform md:translate-x-0 transition-transform duration-300">
            <div class="p-6">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-bolt text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">SHUKLA-ELECTRICALS</h1>
                        <p class="text-xs text-gray-400">Admin Panel</p>
                    </div>
                </div>
                <div class="mt-6 flex items-center space-x-3 p-3 bg-gray-800 rounded-lg">
                    <div class="w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-gray-300"></i>
                    </div>
                    <div>
                        <p class="text-sm font-medium" id="admin-name">Administrator</p>
                        <p class="text-xs text-gray-400" id="admin-email">admin@shuklaelectricals.com</p>
                    </div>
                </div>
            </div>
            
            <nav class="mt-6 px-4">
                <a href="#dashboard" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-tachometer-alt w-5"></i>
                    <span>Dashboard</span>
                </a>
                
                <div class="text-xs font-semibold text-gray-400 uppercase tracking-wider mt-6 mb-2 px-4">Content Management</div>
                
                <a href="#services" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-bolt w-5"></i>
                    <span>Services</span>
                </a>
                
                <a href="#projects" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-project-diagram w-5"></i>
                    <span>Projects</span>
                </a>
                
                <a href="#testimonials" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-star w-5"></i>
                    <span>Testimonials</span>
                </a>
                
                <a href="#team" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-users w-5"></i>
                    <span>Team Members</span>
                </a>
                
                <a href="#partners" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-handshake w-5"></i>
                    <span>Partners</span>
                </a>
                
                <a href="#blog" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-blog w-5"></i>
                    <span>Blog Posts</span>
                </a>
                
                <a href="#gallery" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-images w-5"></i>
                    <span>Gallery</span>
                </a>
                
                <div class="text-xs font-semibold text-gray-400 uppercase tracking-wider mt-6 mb-2 px-4">User Management</div>
                
                <a href="#contacts" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-envelope w-5"></i>
                    <span>Contact Messages</span>
                </a>
                
                <a href="#leads" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-user-plus w-5"></i>
                    <span>Lead Management</span>
                </a>
                
                <a href="#subscribers" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-users w-5"></i>
                    <span>Newsletter Subscribers</span>
                </a>
                
                <div class="text-xs font-semibold text-gray-400 uppercase tracking-wider mt-6 mb-2 px-4">Website Settings</div>
                
                <a href="#settings" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-cog w-5"></i>
                    <span>Website Settings</span>
                </a>
                
                <a href="#seo" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-search w-5"></i>
                    <span>SEO Settings</span>
                </a>
                
                <a href="#analytics" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-chart-bar w-5"></i>
                    <span>Analytics</span>
                </a>
                
                <a href="#ads" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-ad w-5"></i>
                    <span>Ad Spaces</span>
                </a>
                
                <a href="#backup" class="admin-nav flex items-center space-x-3 py-3 px-4 rounded-lg mb-1 hover:bg-gray-800 transition duration-200">
                    <i class="fas fa-database w-5"></i>
                    <span>Backup & Restore</span>
                </a>
                
                <button id="logout-btn" class="w-full flex items-center space-x-3 py-3 px-4 rounded-lg mt-6 hover:bg-red-900 text-red-400 transition duration-200">
                    <i class="fas fa-sign-out-alt w-5"></i>
                    <span>Logout</span>
                </button>
            </nav>
            
            <div class="absolute bottom-0 left-0 right-0 p-4 border-t border-gray-800">
                <p class="text-xs text-gray-500 text-center">v2.1.0 Â© 2024 SHUKLA-ELECTRICALS</p>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="md:ml-64 min-h-screen">
            <!-- Top Bar -->
            <div class="bg-white border-b border-gray-200 px-6 py-4">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800" id="page-title">Dashboard</h1>
                        <p class="text-sm text-gray-600" id="page-subtitle">Welcome to your admin panel</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button class="relative p-2 text-gray-600 hover:text-green-600">
                            <i class="fas fa-bell text-xl"></i>
                            <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
                        </button>
                        <button class="p-2 text-gray-600 hover:text-green-600">
                            <i class="fas fa-question-circle text-xl"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Content Area -->
            <div id="content-area" class="p-6">
                <!-- Content will be loaded here dynamically -->
                <div class="text-center py-12">
                    <div class="spinner mx-auto"></div>
                    <p class="mt-4 text-gray-600">Loading admin panel...</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div id="toast-container"></div>
    
    <!-- Modal Container -->
    <div id="modal-container"></div>
    
    <!-- Firebase Configuration -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDGpagCpskeOxzVO4C5qgdVUTeWO8rUZUU",
            authDomain: "electrician-830b2.firebaseapp.com",
            databaseURL: "https://electrician-830b2-default-rtdb.firebaseio.com",
            projectId: "electrician-830b2",
            storageBucket: "electrician-830b2.firebasestorage.app",
            messagingSenderId: "1053791458330",
            appId: "1:1053791458330:web:fdbf5befa79aef2376eda3"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        const storage = firebase.storage();
    </script>
    
    <!-- Admin JavaScript -->
    <script>
        // Global Variables
        let currentUser = null;
        let currentPage = 'dashboard';
        
        // Toast Notification System
        class Toast {
            static show(message, type = 'info', duration = 4000) {
                const container = document.getElementById('toast-container');
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <i class="fas ${this.getIcon(type)} mr-3"></i>
                            <span>${message}</span>
                        </div>
                        <button class="ml-4 text-white hover:text-gray-200" onclick="this.parentElement.parentElement.remove()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
                container.appendChild(toast);
                
                setTimeout(() => toast.classList.add('show'), 10);
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => toast.remove(), 300);
                }, duration);
            }
            
            static getIcon(type) {
                const icons = {
                    success: 'fa-check-circle',
                    error: 'fa-exclamation-circle',
                    warning: 'fa-exclamation-triangle',
                    info: 'fa-info-circle'
                };
                return icons[type] || 'fa-info-circle';
            }
        }
        
        // Modal System
        class Modal {
            static show(title, content, buttons = []) {
                const container = document.getElementById('modal-container');
                const modalId = 'modal-' + Date.now();
                
                const modalHTML = `
                    <div id="${modalId}" class="modal-overlay">
                        <div class="modal">
                            <div class="p-6 border-b border-gray-200">
                                <h3 class="text-xl font-semibold text-gray-800">${title}</h3>
                            </div>
                            <div class="p-6">
                                ${content}
                            </div>
                            ${buttons.length > 0 ? `
                                <div class="p-6 border-t border-gray-200 flex justify-end space-x-3">
                                    ${buttons.map(btn => `
                                        <button onclick="${btn.onclick}"
                                                class="px-4 py-2 rounded-lg ${btn.primary ? 'bg-green-600 hover:bg-green-700 text-white' : 'bg-gray-200 hover:bg-gray-300 text-gray-800'}">
                                            ${btn.text}
                                        </button>
                                    `).join('')}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                
                container.innerHTML = modalHTML;
                const modal = document.getElementById(modalId);
                modal.classList.add('active');
                
                // Close on overlay click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        this.close(modalId);
                    }
                });
                
                return modalId;
            }
            
            static close(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('active');
                    setTimeout(() => modal.remove(), 300);
                }
            }
        }
        
        // Authentication
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const loginBtn = document.getElementById('login-btn');
            const loginText = document.getElementById('login-text');
            const loginSpinner = document.getElementById('login-spinner');
            const loginError = document.getElementById('login-error');
            
            loginText.classList.add('hidden');
            loginSpinner.classList.remove('hidden');
            loginError.classList.add('hidden');
            
            try {
                // Try to sign in
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                currentUser = userCredential.user;
                
                // Check if user is admin
                const userRef = database.ref('admin/users/' + currentUser.uid);
                const snapshot = await userRef.once('value');
                
                if (snapshot.exists() && snapshot.val().role === 'admin') {
                    Toast.show('Login successful!', 'success');
                    
                    // Store user data
                    localStorage.setItem('adminUser', JSON.stringify({
                        uid: currentUser.uid,
                        email: currentUser.email,
                        name: snapshot.val().name || 'Administrator'
                    }));
                    
                    // Show admin panel
                    setTimeout(() => {
                        document.getElementById('login-screen').classList.add('hidden');
                        document.getElementById('admin-panel').classList.remove('hidden');
                        loadDashboard();
                    }, 1000);
                } else {
                    await auth.signOut();
                    throw new Error('Not authorized');
                }
            } catch (error) {
                console.error('Login error:', error);
                loginError.textContent = error.message || 'Invalid email or password';
                loginError.classList.remove('hidden');
                Toast.show('Login failed. Please check your credentials.', 'error');
            } finally {
                loginText.classList.remove('hidden');
                loginSpinner.classList.add('hidden');
            }
        });
        
        // Check if already logged in
        function checkAuth() {
            const savedUser = localStorage.getItem('adminUser');
            if (savedUser) {
                const user = JSON.parse(savedUser);
                auth.onAuthStateChanged((firebaseUser) => {
                    if (firebaseUser && firebaseUser.uid === user.uid) {
                        currentUser = firebaseUser;
                        document.getElementById('login-screen').classList.add('hidden');
                        document.getElementById('admin-panel').classList.remove('hidden');
                        document.getElementById('admin-name').textContent = user.name;
                        document.getElementById('admin-email').textContent = user.email;
                        loadDashboard();
                    } else {
                        localStorage.removeItem('adminUser');
                    }
                });
            }
        }
        
        // Logout
        document.getElementById('logout-btn').addEventListener('click', async () => {
            try {
                await auth.signOut();
                localStorage.removeItem('adminUser');
                document.getElementById('admin-panel').classList.add('hidden');
                document.getElementById('login-screen').classList.remove('hidden');
                Toast.show('Logged out successfully', 'success');
            } catch (error) {
                Toast.show('Logout failed', 'error');
            }
        });
        
        // Mobile Menu Toggle
        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            document.querySelector('.sidebar').classList.toggle('active');
        });
        
        // Navigation
        document.querySelectorAll('.admin-nav').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const href = link.getAttribute('href').substring(1);
                loadPage(href);
                
                // Update active state
                document.querySelectorAll('.admin-nav').forEach(nav => nav.classList.remove('bg-gray-800', 'text-green-400'));
                link.classList.add('bg-gray-800', 'text-green-400');
                
                // Close mobile menu
                if (window.innerWidth < 768) {
                    document.querySelector('.sidebar').classList.remove('active');
                }
            });
        });
        
        // Page Loading Function
        async function loadPage(page) {
            currentPage = page;
            
            // Update page title
            const titles = {
                dashboard: 'Dashboard',
                services: 'Services Management',
                projects: 'Projects Management',
                testimonials: 'Testimonials Management',
                team: 'Team Management',
                partners: 'Partners Management',
                blog: 'Blog Management',
                gallery: 'Gallery Management',
                contacts: 'Contact Messages',
                leads: 'Lead Management',
                subscribers: 'Newsletter Subscribers',
                settings: 'Website Settings',
                seo: 'SEO Settings',
                analytics: 'Analytics Dashboard',
                ads: 'Ad Spaces Management',
                backup: 'Backup & Restore'
            };
            
            document.getElementById('page-title').textContent = titles[page] || page;
            document.getElementById('page-subtitle').textContent = `Manage ${titles[page] || page}`;
            
            // Load page content
            const contentArea = document.getElementById('content-area');
            contentArea.innerHTML = `
                <div class="text-center py-12">
                    <div class="spinner mx-auto"></div>
                    <p class="mt-4 text-gray-600">Loading ${titles[page] || page}...</p>
                </div>
            `;
            
            // Load specific page content
            switch(page) {
                case 'dashboard':
                    await loadDashboard();
                    break;
                case 'services':
                    await loadServices();
                    break;
                case 'testimonials':
                    await loadTestimonials();
                    break;
                case 'partners':
                    await loadPartners();
                    break;
                case 'blog':
                    await loadBlog();
                    break;
                case 'contacts':
                    await loadContacts();
                    break;
                case 'analytics':
                    await loadAnalytics();
                    break;
                case 'ads':
                    await loadAds();
                    break;
                case 'settings':
                    await loadSettings();
                    break;
                default:
                    contentArea.innerHTML = `
                        <div class="text-center py-12">
                            <i class="fas fa-tools text-4xl text-gray-400 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-700">Page Under Development</h3>
                            <p class="text-gray-600 mt-2">This section is coming soon</p>
                        </div>
                    `;
            }
        }
        
        // Dashboard Page
        async function loadDashboard() {
            const contentArea = document.getElementById('content-area');
            
            try {
                // Fetch stats from Firebase
                const [services, testimonials, partners, blogPosts, contacts] = await Promise.all([
                    database.ref('services').once('value'),
                    database.ref('testimonials').once('value'),
                    database.ref('partners').once('value'),
                    database.ref('blog/posts').once('value'),
                    database.ref('contactMessages').once('value')
                ]);
                
                const stats = {
                    services: services.numChildren(),
                    testimonials: testimonials.numChildren(),
                    partners: partners.numChildren(),
                    blogPosts: blogPosts.numChildren(),
                    contacts: contacts.numChildren()
                };
                
                contentArea.innerHTML = `
                    <div class="fade-in">
                        <!-- Stats Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-xl p-6 card-hover">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-green-800 font-medium">Total Services</p>
                                        <h3 class="text-3xl font-bold text-gray-800 mt-2">${stats.services}</h3>
                                    </div>
                                    <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-bolt text-white text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-6 card-hover">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-blue-800 font-medium">Testimonials</p>
                                        <h3 class="text-3xl font-bold text-gray-800 mt-2">${stats.testimonials}</h3>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-star text-white text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 rounded-xl p-6 card-hover">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-purple-800 font-medium">Partners</p>
                                        <h3 class="text-3xl font-bold text-gray-800 mt-2">${stats.partners}</h3>
                                    </div>
                                    <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-handshake text-white text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gradient-to-br from-orange-50 to-orange-100 border border-orange-200 rounded-xl p-6 card-hover">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-orange-800 font-medium">Blog Posts</p>
                                        <h3 class="text-3xl font-bold text-gray-800 mt-2">${stats.blogPosts}</h3>
                                    </div>
                                    <div class="w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-blog text-white text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">Quick Actions</h3>
                                <div class="grid grid-cols-2 gap-4">
                                    <button onclick="loadPage('services')" class="p-4 bg-gray-50 hover:bg-green-50 rounded-lg border border-gray-200 hover:border-green-300 transition duration-200">
                                        <i class="fas fa-plus text-green-600 mb-2"></i>
                                        <p class="font-medium">Add Service</p>
                                    </button>
                                    <button onclick="loadPage('blog')" class="p-4 bg-gray-50 hover:bg-blue-50 rounded-lg border border-gray-200 hover:border-blue-300 transition duration-200">
                                        <i class="fas fa-edit text-blue-600 mb-2"></i>
                                        <p class="font-medium">Write Blog</p>
                                    </button>
                                    <button onclick="loadPage('contacts')" class="p-4 bg-gray-50 hover:bg-purple-50 rounded-lg border border-gray-200 hover:border-purple-300 transition duration-200">
                                        <i class="fas fa-envelope text-purple-600 mb-2"></i>
                                        <p class="font-medium">View Messages</p>
                                    </button>
                                    <button onclick="loadPage('analytics')" class="p-4 bg-gray-50 hover:bg-orange-50 rounded-lg border border-gray-200 hover:border-orange-300 transition duration-200">
                                        <i class="fas fa-chart-line text-orange-600 mb-2"></i>
                                        <p class="font-medium">Analytics</p>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Recent Activity -->
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">Recent Activity</h3>
                                <div class="space-y-4">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                            <i class="fas fa-user-plus text-green-600"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium">New contact message received</p>
                                            <p class="text-sm text-gray-600">2 minutes ago</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                            <i class="fas fa-blog text-blue-600"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium">New blog post published</p>
                                            <p class="text-sm text-gray-600">1 hour ago</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                                            <i class="fas fa-star text-purple-600"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium">New testimonial added</p>
                                            <p class="text-sm text-gray-600">3 hours ago</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- System Status -->
                        <div class="mt-6 bg-white rounded-xl border border-gray-200 p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">System Status</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="p-4 bg-gray-50 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <span class="font-medium">Database</span>
                                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded">Online</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-2">Firebase Realtime Database</p>
                                </div>
                                <div class="p-4 bg-gray-50 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <span class="font-medium">Storage</span>
                                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded">Online</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-2">Firebase Cloud Storage</p>
                                </div>
                                <div class="p-4 bg-gray-50 rounded-lg">
                                    <div class="flex items-center justify-between">
                                        <span class="font-medium">Authentication</span>
                                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded">Active</span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-2">1 user logged in</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                contentArea.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-700">Error Loading Dashboard</h3>
                        <p class="text-gray-600 mt-2">${error.message}</p>
                    </div>
                `;
            }
        }
        
        // Services Management
        async function loadServices() {
            const contentArea = document.getElementById('content-area');
            
            try {
                const snapshot = await database.ref('services').once('value');
                const services = snapshot.val() || {};
                
                contentArea.innerHTML = `
                    <div class="fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Services Management</h2>
                                <p class="text-gray-600">Manage electrical services offered</p>
                            </div>
                            <button onclick="showAddServiceModal()" 
                                    class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center">
                                <i class="fas fa-plus mr-2"></i> Add Service
                            </button>
                        </div>
                        
                        <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                            <div class="overflow-x-auto">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Icon</th>
                                            <th>Title</th>
                                            <th>Category</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${Object.keys(services).map(key => {
                                            const service = services[key];
                                            return `
                                                <tr>
                                                    <td class="py-3">
                                                        <div class="w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center">
                                                            <i class="${service.icon || 'fas fa-bolt'} text-green-600"></i>
                                                        </div>
                                                    </td>
                                                    <td class="font-medium">${service.title}</td>
                                                    <td><span class="px-3 py-1 bg-gray-100 rounded-full text-sm">${service.category || 'General'}</span></td>
                                                    <td>
                                                        <span class="status-badge ${service.active ? 'status-active' : 'status-inactive'}">
                                                            ${service.active ? 'Active' : 'Inactive'}
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <div class="flex space-x-2">
                                                            <button onclick="editService('${key}')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg">
                                                                <i class="fas fa-edit"></i>
                                                            </button>
                                                            <button onclick="deleteService('${key}', '${service.title}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg">
                                                                <i class="fas fa-trash"></i>
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            `;
                                        }).join('') || `
                                            <tr>
                                                <td colspan="5" class="text-center py-8 text-gray-500">
                                                    <i class="fas fa-inbox text-3xl mb-2"></i>
                                                    <p>No services found. Add your first service!</p>
                                                </td>
                                            </tr>
                                        `}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                contentArea.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-700">Error Loading Services</h3>
                        <p class="text-gray-600 mt-2">${error.message}</p>
                    </div>
                `;
            }
        }
        
        function showAddServiceModal() {
            const modalId = Modal.show('Add New Service', `
                <form id="add-service-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Service Title *</label>
                        <input type="text" id="service-title" required 
                               class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description *</label>
                        <textarea id="service-description" required rows="3"
                               class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Icon</label>
                            <select id="service-icon" class="w-full px-4 py-2 rounded-lg border border-gray-300">
                                <option value="fas fa-bolt">Bolt</option>
                                <option value="fas fa-lightbulb">Lightbulb</option>
                                <option value="fas fa-plug">Plug</option>
                                <option value="fas fa-tools">Tools</option>
                                <option value="fas fa-home">Home</option>
                                <option value="fas fa-building">Building</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                            <select id="service-category" class="w-full px-4 py-2 rounded-lg border border-gray-300">
                                <option value="Residential">Residential</option>
                                <option value="Commercial">Commercial</option>
                                <option value="Industrial">Industrial</option>
                                <option value="Emergency">Emergency</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="service-active" checked class="mr-2">
                        <label for="service-active" class="text-sm text-gray-700">Active (Show on website)</label>
                    </div>
                </form>
            `, [
                {
                    text: 'Cancel',
                    onclick: `Modal.close('${modalId}')`
                },
                {
                    text: 'Add Service',
                    primary: true,
                    onclick: `addService('${modalId}')`
                }
            ]);
        }
        
        async function addService(modalId) {
            try {
                const serviceData = {
                    title: document.getElementById('service-title').value,
                    description: document.getElementById('service-description').value,
                    icon: document.getElementById('service-icon').value,
                    category: document.getElementById('service-category').value,
                    active: document.getElementById('service-active').checked,
                    createdAt: Date.now()
                };
                
                await database.ref('services').push(serviceData);
                Modal.close(modalId);
                Toast.show('Service added successfully!', 'success');
                loadServices();
            } catch (error) {
                Toast.show('Error adding service: ' + error.message, 'error');
            }
        }
        
        // Testimonials Management
        async function loadTestimonials() {
            const contentArea = document.getElementById('content-area');
            
            try {
                const snapshot = await database.ref('testimonials').once('value');
                const testimonials = snapshot.val() || {};
                
                contentArea.innerHTML = `
                    <div class="fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Testimonials Management</h2>
                                <p class="text-gray-600">Manage customer testimonials and reviews</p>
                            </div>
                            <button onclick="showAddTestimonialModal()" 
                                    class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center">
                                <i class="fas fa-plus mr-2"></i> Add Testimonial
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            ${Object.keys(testimonials).map(key => {
                                const testimonial = testimonials[key];
                                return `
                                    <div class="bg-white rounded-xl border border-gray-200 p-6 card-hover">
                                        <div class="flex items-start space-x-4 mb-4">
                                            <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold">
                                                ${testimonial.name.charAt(0)}
                                            </div>
                                            <div>
                                                <h4 class="font-semibold">${testimonial.name}</h4>
                                                <p class="text-sm text-gray-600">${testimonial.position || 'Customer'}</p>
                                            </div>
                                        </div>
                                        <p class="text-gray-700 mb-4">"${testimonial.content}"</p>
                                        <div class="flex items-center justify-between">
                                            <div class="flex text-yellow-400">
                                                ${'â'.repeat(testimonial.rating || 5)}
                                            </div>
                                            <div class="flex space-x-2">
                                                <button onclick="editTestimonial('${key}')" class="p-1 text-blue-600">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button onclick="deleteTestimonial('${key}', '${testimonial.name}')" class="p-1 text-red-600">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }).join('') || `
                                <div class="col-span-3 text-center py-12 text-gray-500">
                                    <i class="fas fa-comments text-4xl mb-4"></i>
                                    <p class="text-lg">No testimonials yet</p>
                                    <p class="text-sm mt-2">Add your first customer testimonial</p>
                                </div>
                            `}
                        </div>
                    </div>
                `;
            } catch (error) {
                contentArea.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-700">Error Loading Testimonials</h3>
                        <p class="text-gray-600 mt-2">${error.message}</p>
                    </div>
                `;
            }
        }
        
        // Partners Management
        async function loadPartners() {
            const contentArea = document.getElementById('content-area');
            
            try {
                const snapshot = await database.ref('partners').once('value');
                const partners = snapshot.val() || {};
                
                contentArea.innerHTML = `
                    <div class="fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Partners Management</h2>
                                <p class="text-gray-600">Manage business partners and collaborations</p>
                            </div>
                            <button onclick="showAddPartnerModal()" 
                                    class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center">
                                <i class="fas fa-plus mr-2"></i> Add Partner
                            </button>
                        </div>
                        
                        <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                            <div class="overflow-x-auto">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Logo</th>
                                            <th>Name</th>
                                            <th>Type</th>
                                            <th>Website</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${Object.keys(partners).map(key => {
                                            const partner = partners[key];
                                            return `
                                                <tr>
                                                    <td class="py-3">
                                                        <div class="w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center">
                                                            <i class="fas fa-building text-gray-600"></i>
                                                        </div>
                                                    </td>
                                                    <td class="font-medium">${partner.name}</td>
                                                    <td><span class="px-3 py-1 bg-gray-100 rounded-full text-sm">${partner.type || 'Partner'}</span></td>
                                                    <td><a href="${partner.website}" target="_blank" class="text-blue-600 hover:underline">${partner.website}</a></td>
                                                    <td>
                                                        <span class="status-badge ${partner.active ? 'status-active' : 'status-inactive'}">
                                                            ${partner.active ? 'Active' : 'Inactive'}
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <div class="flex space-x-2">
                                                            <button onclick="editPartner('${key}')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg">
                                                                <i class="fas fa-edit"></i>
                                                            </button>
                                                            <button onclick="deletePartner('${key}', '${partner.name}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg">
                                                                <i class="fas fa-trash"></i>
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            `;
                                        }).join('') || `
                                            <tr>
                                                <td colspan="6" class="text-center py-8 text-gray-500">
                                                    <i class="fas fa-handshake text-3xl mb-2"></i>
                                                    <p>No partners found. Add your first partner!</p>
                                                </td>
                                            </tr>
                                        `}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                contentArea.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-700">Error Loading Partners</h3>
                        <p class="text-gray-600 mt-2">${error.message}</p>
                    </div>
                `;
            }
        }
        
        // Blog Management
        async function loadBlog() {
            const contentArea = document.getElementById('content-area');
            
            try {
                const snapshot = await database.ref('blog/posts').once('value');
                const posts = snapshot.val() || {};
                
                contentArea.innerHTML = `
                    <div class="fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Blog Management</h2>
                                <p class="text-gray-600">Create and manage blog posts</p>
                            </div>
                            <button onclick="showAddBlogModal()" 
                                    class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center">
                                <i class="fas fa-plus mr-2"></i> New Post
                            </button>
                        </div>
                        
                        <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                            <div class="overflow-x-auto">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Image</th>
                                            <th>Title</th>
                                            <th>Category</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${Object.keys(posts).map(key => {
                                            const post = posts[key];
                                            return `
                                                <tr>
                                                    <td class="py-3">
                                                        <div class="w-16 h-12 bg-gray-100 rounded-lg flex items-center justify-center">
                                                            <i class="fas fa-image text-gray-400"></i>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="font-medium">${post.title}</div>
                                                        <div class="text-sm text-gray-600">${post.excerpt || ''}</div>
                                                    </td>
                                                    <td><span class="px-3 py-1 bg-gray-100 rounded-full text-sm">${post.category || 'General'}</span></td>
                                                    <td>${new Date(post.timestamp).toLocaleDateString()}</td>
                                                    <td>
                                                        <span class="status-badge ${post.published ? 'status-published' : 'status-pending'}">
                                                            ${post.published ? 'Published' : 'Draft'}
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <div class="flex space-x-2">
                                                            <button onclick="viewBlogPost('${key}')" class="p-2 text-green-600 hover:bg-green-50 rounded-lg">
                                                                <i class="fas fa-eye"></i>
                                                            </button>
                                                            <button onclick="editBlogPost('${key}')" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg">
                                                                <i class="fas fa-edit"></i>
                                                            </button>
                                                            <button onclick="deleteBlogPost('${key}', '${post.title}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg">
                                                                <i class="fas fa-trash"></i>
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            `;
                                        }).join('') || `
                                            <tr>
                                                <td colspan="6" class="text-center py-8 text-gray-500">
                                                    <i class="fas fa-newspaper text-3xl mb-2"></i>
                                                    <p>No blog posts found. Create your first post!</p>
                                                </td>
                                            </tr>
                                        `}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                contentArea.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-700">Error Loading Blog Posts</h3>
                        <p class="text-gray-600 mt-2">${error.message}</p>
                    </div>
                `;
            }
        }
        
        // Contacts Management
        async function loadContacts() {
            const contentArea = document.getElementById('content-area');
            
            try {
                const snapshot = await database.ref('contactMessages').once('value');
                const messages = snapshot.val() || {};
                
                contentArea.innerHTML = `
                    <div class="fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Contact Messages</h2>
                                <p class="text-gray-600">Manage customer inquiries and messages</p>
                            </div>
                            <button onclick="exportContacts()" 
                                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium flex items-center">
                                <i class="fas fa-download mr-2"></i> Export CSV
                            </button>
                        </div>
                        
                        <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
                            <div class="overflow-x-auto">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Subject</th>
                                            <th>Message</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${Object.keys(messages).map(key => {
                                            const message = messages[key];
                                            return `
                                                <tr>
                                                    <td class="font-medium">${message.name}</td>
                                                    <td><a href="mailto:${message.email}" class="text-blue-600 hover:underline">${message.email}</a></td>
                                                    <td>${message.subject}</td>
                                                    <td class="max-w-xs truncate">${message.message}</td>
                                                    <td>${new Date(message.timestamp).toLocaleDateString()}</td>
                                                    <td>
                                                        <span class="status-badge ${message.read ? 'status-inactive' : 'status-pending'}">
                                                            ${message.read ? 'Read' : 'Unread'}
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <div class="flex space-x-2">
                                                            <button onclick="viewMessage('${key}')" class="p-2 text-green-600 hover:bg-green-50 rounded-lg">
                                                                <i class="fas fa-eye"></i>
                                                            </button>
                                                            <button onclick="deleteMessage('${key}')" class="p-2 text-red-600 hover:bg-red-50 rounded-lg">
                                                                <i class="fas fa-trash"></i>
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            `;
                                        }).join('') || `
                                            <tr>
                                                <td colspan="7" class="text-center py-8 text-gray-500">
                                                    <i class="fas fa-inbox text-3xl mb-2"></i>
                                                    <p>No messages found</p>
                                                </td>
                                            </tr>
                                        `}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                `;
            } catch (error) {
                contentArea.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-700">Error Loading Messages</h3>
                        <p class="text-gray-600 mt-2">${error.message}</p>
                    </div>
                `;
            }
        }
        
        // Analytics Dashboard
        async function loadAnalytics() {
            const contentArea = document.getElementById('content-area');
            
            try {
                // Fetch analytics data
                const [pageViews, visitors, popularPages] = await Promise.all([
                    database.ref('analytics/pageViews').once('value'),
                    database.ref('analytics/visitors').once('value'),
                    database.ref('analytics/popularPages').once('value')
                ]);
                
                contentArea.innerHTML = `
                    <div class="fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Analytics Dashboard</h2>
                                <p class="text-gray-600">Website performance and user statistics</p>
                            </div>
                            <div class="flex space-x-4">
                                <select class="px-4 py-2 rounded-lg border border-gray-300">
                                    <option>Last 7 days</option>
                                    <option>Last 30 days</option>
                                    <option>Last 90 days</option>
                                </select>
                                <button onclick="refreshAnalytics()" 
                                        class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center">
                                    <i class="fas fa-sync-alt mr-2"></i> Refresh
                                </button>
                            </div>
                        </div>
                        
                        <!-- Analytics Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-gray-600">Total Page Views</p>
                                        <h3 class="text-3xl font-bold text-gray-800 mt-2">${pageViews.numChildren() || 0}</h3>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-eye text-blue-600 text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-gray-600">Unique Visitors</p>
                                        <h3 class="text-3xl font-bold text-gray-800 mt-2">${visitors.numChildren() || 0}</h3>
                                    </div>
                                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-users text-green-600 text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-gray-600">Avg. Session Duration</p>
                                        <h3 class="text-3xl font-bold text-gray-800 mt-2">2:45</h3>
                                    </div>
                                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-clock text-purple-600 text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-gray-600">Bounce Rate</p>
                                        <h3 class="text-3xl font-bold text-gray-800 mt-2">32%</h3>
                                    </div>
                                    <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-chart-line text-orange-600 text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Charts -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">Page Views Overview</h3>
                                <canvas id="pageViewsChart" height="250"></canvas>
                            </div>
                            <div class="bg-white rounded-xl border border-gray-200 p-6">
                                <h3 class="text-lg font-semibold text-gray-800 mb-4">Visitor Sources</h3>
                                <canvas id="visitorSourcesChart" height="250"></canvas>
                            </div>
                        </div>
                        
                        <!-- Popular Pages -->
                        <div class="bg-white rounded-xl border border-gray-200 p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Most Popular Pages</h3>
                            <div class="space-y-4">
                                ${Object.entries(popularPages.val() || {}).slice(0, 5).map(([page, views]) => `
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                        <div class="flex items-center">
                                            <i class="fas fa-file-alt text-gray-400 mr-3"></i>
                                            <span class="font-medium">${page}</span>
                                        </div>
                                        <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">${views} views</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
                
                // Initialize charts
                setTimeout(() => {
                    initCharts();
                }, 100);
                
            } catch (error) {
                contentArea.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-700">Error Loading Analytics</h3>
                        <p class="text-gray-600 mt-2">${error.message}</p>
                    </div>
                `;
            }
        }
        
        function initCharts() {
            // Page Views Chart
            const pageViewsCtx = document.getElementById('pageViewsChart').getContext('2d');
            new Chart(pageViewsCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Page Views',
                        data: [120, 190, 300, 500, 200, 300, 450],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Visitor Sources Chart
            const sourcesCtx = document.getElementById('visitorSourcesChart').getContext('2d');
            new Chart(sourcesCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Direct', 'Social', 'Search', 'Referral'],
                    datasets: [{
                        data: [40, 25, 20, 15],
                        backgroundColor: [
                            '#10b981',
                            '#3b82f6',
                            '#f59e0b',
                            '#8b5cf6'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        // Ad Spaces Management
        async function loadAds() {
            const contentArea = document.getElementById('content-area');
            
            contentArea.innerHTML = `
                <div class="fade-in">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Ad Spaces Management</h2>
                            <p class="text-gray-600">Manage advertisement spaces on the website</p>
                        </div>
                        <button onclick="showAddAdModal()" 
                                class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center">
                            <i class="fas fa-plus mr-2"></i> Add Ad Space
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Ad Space Card -->
                        <div class="bg-white rounded-xl border border-gray-200 p-6 card-hover">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-semibold">Header Banner</h4>
                                <span class="status-badge status-active">Active</span>
                            </div>
                            <div class="bg-gray-100 h-32 rounded-lg flex items-center justify-center mb-4">
                                <div class="text-center">
                                    <i class="fas fa-ad text-gray-400 text-3xl mb-2"></i>
                                    <p class="text-sm text-gray-600">728 x 90 Banner</p>
                                </div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-sm text-gray-600">Clicks: 245</span>
                                <div class="flex space-x-2">
                                    <button class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="p-2 text-red-600 hover:bg-red-50 rounded-lg">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Add more ad spaces as needed -->
                    </div>
                </div>
            `;
        }
        
        // Website Settings
        async function loadSettings() {
            const contentArea = document.getElementById('content-area');
            
            try {
                const snapshot = await database.ref('settings').once('value');
                const settings = snapshot.val() || {};
                
                contentArea.innerHTML = `
                    <div class="fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Website Settings</h2>
                                <p class="text-gray-600">Configure website preferences and options</p>
                            </div>
                            <button onclick="saveSettings()" 
                                    class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium flex items-center">
                                <i class="fas fa-save mr-2"></i> Save Settings
                            </button>
                        </div>
                        
                        <div class="bg-white rounded-xl border border-gray-200 p-6">
                            <form id="settings-form" class="space-y-6">
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-800 mb-4">General Settings</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Website Name</label>
                                            <input type="text" name="siteName" value="${settings.siteName || 'SHUKLA-ELECTRICALS'}" 
                                                   class="w-full px-4 py-2 rounded-lg border border-gray-300">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Email</label>
                                            <input type="email" name="contactEmail" value="${settings.contactEmail || 'info@shuklaelectricals.com'}" 
                                                   class="w-full px-4 py-2 rounded-lg border border-gray-300">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                                            <input type="tel" name="phone" value="${settings.phone || '(123) 456-7890'}" 
                                                   class="w-full px-4 py-2 rounded-lg border border-gray-300">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Address</label>
                                            <input type="text" name="address" value="${settings.address || '123 Electrical Street, City, State 12345'}" 
                                                   class="w-full px-4 py-2 rounded-lg border border-gray-300">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="border-t pt-6">
                                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Social Media</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Facebook URL</label>
                                            <input type="url" name="facebook" value="${settings.facebook || ''}" 
                                                   class="w-full px-4 py-2 rounded-lg border border-gray-300">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Twitter URL</label>
                                            <input type="url" name="twitter" value="${settings.twitter || ''}" 
                                                   class="w-full px-4 py-2 rounded-lg border border-gray-300">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Instagram URL</label>
                                            <input type="url" name="instagram" value="${settings.instagram || ''}" 
                                                   class="w-full px-4 py-2 rounded-lg border border-gray-300">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">LinkedIn URL</label>
                                            <input type="url" name="linkedin" value="${settings.linkedin || ''}" 
                                                   class="w-full px-4 py-2 rounded-lg border border-gray-300">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="border-t pt-6">
                                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Maintenance Mode</h3>
                                    <div class="flex items-center">
                                        <input type="checkbox" name="maintenanceMode" ${settings.maintenanceMode ? 'checked' : ''} 
                                               id="maintenanceMode" class="mr-2">
                                        <label for="maintenanceMode" class="text-gray-700">Enable maintenance mode</label>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-2">When enabled, only admins can access the website.</p>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
            } catch (error) {
                contentArea.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-700">Error Loading Settings</h3>
                        <p class="text-gray-600 mt-2">${error.message}</p>
                    </div>
                `;
            }
        }
        
        async function saveSettings() {
            try {
                const form = document.getElementById('settings-form');
                const formData = new FormData(form);
                const settings = {};
                
                for (let [key, value] of formData.entries()) {
                    settings[key] = value;
                }
                
                settings.maintenanceMode = document.getElementById('maintenanceMode').checked;
                
                await database.ref('settings').set(settings);
                Toast.show('Settings saved successfully!', 'success');
            } catch (error) {
                Toast.show('Error saving settings: ' + error.message, 'error');
            }
        }
        
        // Initialize admin panel
        document.addEventListener('DOMContentLoaded', () => {
            checkAuth();
            
            // Add animation to all pages when loaded
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'childList') {
                        const contentArea = document.getElementById('content-area');
                        if (contentArea) {
                            contentArea.classList.add('fade-in');
                        }
                    }
                });
            });
            
            observer.observe(document.getElementById('content-area'), {
                childList: true,
                subtree: true
            });
        });
        
        // Utility Functions
        async function exportContacts() {
            try {
                const snapshot = await database.ref('contactMessages').once('value');
                const messages = snapshot.val() || {};
                
                let csv = 'Name,Email,Subject,Message,Date\n';
                Object.values(messages).forEach(msg => {
                    csv += `"${msg.name}","${msg.email}","${msg.subject}","${msg.message}",${new Date(msg.timestamp).toLocaleDateString()}\n`;
                });
                
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'contacts_' + new Date().toISOString().split('T')[0] + '.csv';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                Toast.show('Contacts exported successfully!', 'success');
            } catch (error) {
                Toast.show('Error exporting contacts: ' + error.message, 'error');
            }
        }
        
        // Delete functions (to be implemented for each section)
        async function deleteService(id, name) {
            if (confirm(`Are you sure you want to delete "${name}"?`)) {
                try {
                    await database.ref(`services/${id}`).remove();
                    Toast.show('Service deleted successfully!', 'success');
                    loadServices();
                } catch (error) {
                    Toast.show('Error deleting service: ' + error.message, 'error');
                }
            }
        }
        
        async function deleteTestimonial(id, name) {
            if (confirm(`Are you sure you want to delete testimonial from "${name}"?`)) {
                try {
                    await database.ref(`testimonials/${id}`).remove();
                    Toast.show('Testimonial deleted successfully!', 'success');
                    loadTestimonials();
                } catch (error) {
                    Toast.show('Error deleting testimonial: ' + error.message, 'error');
                }
            }
        }
        
        async function deletePartner(id, name) {
            if (confirm(`Are you sure you want to delete partner "${name}"?`)) {
                try {
                    await database.ref(`partners/${id}`).remove();
                    Toast.show('Partner deleted successfully!', 'success');
                    loadPartners();
                } catch (error) {
                    Toast.show('Error deleting partner: ' + error.message, 'error');
                }
            }
        }
        
        async function deleteBlogPost(id, title) {
            if (confirm(`Are you sure you want to delete blog post "${title}"?`)) {
                try {
                    await database.ref(`blog/posts/${id}`).remove();
                    Toast.show('Blog post deleted successfully!', 'success');
                    loadBlog();
                } catch (error) {
                    Toast.show('Error deleting blog post: ' + error.message, 'error');
                }
            }
        }
        
        async function deleteMessage(id) {
            if (confirm('Are you sure you want to delete this message?')) {
                try {
                    await database.ref(`contactMessages/${id}`).remove();
                    Toast.show('Message deleted successfully!', 'success');
                    loadContacts();
                } catch (error) {
                    Toast.show('Error deleting message: ' + error.message, 'error');
                }
            }
        }
        
        // Edit functions (stubs - can be expanded)
        function editService(id) {
            Toast.show('Edit service functionality coming soon!', 'info');
        }
        
        function editTestimonial(id) {
            Toast.show('Edit testimonial functionality coming soon!', 'info');
        }
        
        function editPartner(id) {
            Toast.show('Edit partner functionality coming soon!', 'info');
        }
        
        function editBlogPost(id) {
            Toast.show('Edit blog post functionality coming soon!', 'info');
        }
        
        function viewBlogPost(id) {
            window.open(`post.html?id=${id}`, '_blank');
        }
        
        function viewMessage(id) {
            Toast.show('View message functionality coming soon!', 'info');
        }
        
        function showAddTestimonialModal() {
            Toast.show('Add testimonial functionality coming soon!', 'info');
        }
        
        function showAddPartnerModal() {
            Toast.show('Add partner functionality coming soon!', 'info');
        }
        
        function showAddBlogModal() {
            Toast.show('Add blog post functionality coming soon!', 'info');
        }
        
        function showAddAdModal() {
            Toast.show('Add ad space functionality coming soon!', 'info');
        }
        
        function refreshAnalytics() {
            loadAnalytics();
            Toast.show('Analytics refreshed!', 'success');
        }
    </script>
</body>
                            </html>
